============================================================
 BIG TODO: Nedělat nic, co nepotřebuju na funkční prototyp!
============================================================

TARGET:
- posílám automaticky serializovaný pakety (entity)
- savuju entity na disk
- na klientovi mám komponenty, okna
- funguje registrace playerů
- mám zónu, v ní roomy
- hraju si se zobrazením minimapy
- klikací editor mapy
  - nejdřív jen nové roomy
  - pak editace properties stávajících room
  - pak prototypová dědičnost room a přiřazování prototypu
    v editoru

Trochu změna: Mapa first

How much to do in this batch?
- určitě zobrazit víc místností a exity mezi nimi.
- mouseover a selection na roomu a exitu
- "naklikávání" mapy (zatím bez vyrábění dat na serveru)
  - čistě edit mód, jinej zatím vůbec neuvažovat.

------------------------------------------------------------------------------

Optimalizace mapy:
------------------

TODO: Nevytvářet roomy podle rozměrů worldu, ale podle počtu, kolik je třeba
  zobrazovat

TODO: Vyrábět room elementy mimo DOM a insternout je najednou s parentem
[done]

TODO: Nevytvářet exity podle rozměrů worldu, ale podle počtu, kolik je třeba
  zobrazovat

TODO: Vyrábět exit elementy mimo DOM a insternout je najednou
  s parentem

TODO: Cashování room elementů při updatu mapy
- nejdřív se checkne, který nemají být vidět, ty se hidnou a hoděj do seznamu
  komponent v cashi.
- pak se projdou roomy, který mají bejt vidět a nejsou, ale elementy se pro ně
  nebudou vyrábět - místo toho se vezmou z cashe, nastaví se jim pozice,
  grafika atd. a odhidnou se.

TODO: Grid je v /shared, tj. asi by v něm nemělo bejt počáteční nastavení
  velikosti
- po optimalizaci mapy to budu moct zrušit.

------------------------------------------------------------------------------

TODO: Jelikož se 'result' object před použitím StringUtils.scan() stejně
  musí inicializovat, tak asi klidně můžu automaticky konvertovat typy.
- s typem návratový hodnoty problém nebude, protože nemusím nic vracet
  (result se modifikuje jako side effect).
- házet Error, když dostanu 'result' object s 'undefined' propertizama.
IDEA: property, do kterých se má zapsat number, bych mohl inicializovat
  na NaN (ale můžu asi povolit i inicializaci číslem).
- tj. testovat, jestli je property NaN nebo typ "number".

TODO: Parametrizovat 'location' v Gui.updateMap()

TODO: Provázat velikost zobrazované části mapy v Gui.getCoordsInView()
  s RoomsSvg.ROOMS_IN_CACHE.

TODO: Pokusit se sjednotit "Nothing here" a "Doesn't exist"
  (asi vracet z gridu "Doesn't exist")

TODO: Vysvětlující error message v RoomsSvg.addRoomSvg()

TODO: Dát někam funkci na čtení jména z elementu a použít ji
  ve WorldSvg.getRoomCoords().


TODO: Invertnout 's' axis (kladné hodnoty by měly růst nahoru)

TODO: Rozestupy a velikost roomů nastavit relativně k velikosti fontu.
Jak zjistit, kolik je 1 rem:
 parseFloat(getComputedStyle(document.documentElement).fontSize)
 (pokud font size html dokumentu nastavuju sám, tak si to můžu prostě pamatovat)
- asi je to lepší zjišťovat z DOM

TODO: V css používat výhradně rem (a procenta), nikdy pixely
- změnit šířku rámečku okna.

TODO: Prostudovat:
  https://medium.com/better-programming/event-delegation-in-javascript-boost-your-app-performance-5f10f25cec96
  https://ehsangazar.com/optimizing-javascript-event-listeners-for-performance-e28406ad406c
  https://ehsangazar.com/javascript-tips-for-performance-ee53239ae12d

TODO: Revize hierarchie komponent (hlavně SVG komponent)
- ideálně by element měl bejt vždycky konkrétního typu
  (tj. nenastavoval by se v konstruktoru, ale nejspíš přímo inicializací
   v classe, takže potomek by ho overridnul).

TODO: Obecnější parsování argumentů ze stringu
- chtělo by to vyčítat hodnoty rovnou do properties výslednýho objektu.
  (problém je, že bych ten objekt musel předat jako parametr,
   abych mohl uvnitř parsovací funkce, zjistit, kolik má properties
   a jak se jmenujou).

TODO: V createMap() v cyklu na vyrábění mapy oasertovat krajní hodnoty cyklu,
 abych nemohl vyrobit nekonečnej cyklus.
- tohle asi po optimalizaci nebude potřeba (respektive možná to bude
  potřeba v novém cyklu)

TODO: Líp vyřešit onLeftClick a onRightClick
  (nelíbí se mi, že se různý eventy handlujou různě)
- asi na to v Component udělat funkci assignEventHandler()
  (nebo registerEventHandler()) a tý předat typ eventu
  a handler s tím, že ona si uvnitř pořeší setnutí handleru
  na element, případně pseudo event na right click.
Ono teda popravdě přiřazovat ty handlery přímo na this.element
  bude možná nakonec nejpřehlednější. A navíc je to pure javascript,
  takže se dá celkem snadno vygooglit, jak se to dělá.

TODO: U "line" nedává smysl setPosition().

TODO: Parametrizovat rozestupy místností 

TODO: Room.PIXEL_SIZE hodit zpět někam do GUI
  (A je to spíš ROOM_SPACING).
  Rooma může mít klidně velikost, ale relativně (small, medium, large).
  (A hlavně to nemusím řešit teď).

TODO: Ještě přece jen zvážit, že by se event handlery věšely rovnou
  na komponentu.
- mohly by to bejt settery, takže by se jmenovaly stejně jako v javascriptu
  (onclick atp.). Prostě by to jen provovaly na this.element.
Sounds good.
TODO: Když už v tom budu, tak můžu handlery automaticky obalovat
  odchytáváním a reportováním exceptionů (což je dobro).
IDEA: Možná bych pak vůbec nemusel exceptiony v handlerech ošetřovat, dělalo
  by se to automaticky.

TODO: Odchytávat exeptiony v RoomSvg (nebo možná spíš v navěšování handlerů
  v Component).

TODO: Mazání exitů pravým myšítkem
TODO: Mazání exitů dragováním pravým myšítkem

TODO: :hover pro exity (a možná i černej background).
  - Na to asi budu potřebovat Componentu, abych jí mohl dát separátní css
    (kdybych setoval css celýmu RoomSvg, měnil bych tím obě čáry).

TODO: Vymyslet, jak zobrazovat exity up a down

Asi nějak takhle:

  .
 /|\
  |
  |
 /
/

TODO: Zprovoznit editaci víc než jedný vrstvy
- bude třeba "chození up a down" (a obecně asi chození po mapě, teď
  se dá zobrazit jen omezenej výřez).

TODO: V Gui asi míchám moc responsibility dohromady.
- je to stavovej automat
- vyrábí to svg mapy
  - to by asi měla dělat svg komponenta s mapou. Gui na ni může mít odkaz.

------------------------------------------------------------------------------

Výhledové TODO
---------------

TODO: Na editaci by se asi hodilo mít větší ikony room, aby se na ně líp
  trefovalo (zase to pak bude vypadat jinak než hra, to asi není dobře).

TODO: Přezoomování na jiný místo (tj. zoomIn() bude zároveň mapu centerovat
  na pozici myši).

TODO: Vymyslet, jak zobrazovat jednosměrné exity
  Tohle zatím nepotřebuju, beztak budu chtít spíš buildit obousměrný exity.

TODO: Až budu dělat teleporty (exity na větší vzdálenost než 1), tak do cílové
  roomy dát seznam místností, odkud se do ní dá teleportovat (mimo jiné
  kvůli tomu, aby se při smazání roomy daly invalidovat exity, který do ní
  vedou (setjnout jim 'to' na 'nowhere').

TODO: Výhledově by mělo bejt v editoru undo.

TODO: Zamyslet se nad exity do neexistujících místností
- v edit módu je to blbost, ale v mapper módu player vidí,
  že je v daném směru exit, ale ještě neví, kam vede.
Good point - řeším zbývající jednosměrné exity po smazání roomy, to s tím
  souvisí.
- Asi by měl přibýt třetí stav exitu, tj. kromě one-way a two-way by mělo
    být něco jako "at least one-way"
  To ale budu řešit až v rámci automap módu.

Change color of svg:
https://css-tricks.com/change-color-of-svg-on-hover/

Room
-----

Ikona - svg image
  - tvar (square, circle) 

Exit
-----

Exit line (svg line)
Exit outline (širší svg line pod ní. Nebo možná outline attribute?)
Exit highlight (možná drop shadow?)



Workaround jak přidat outlinu k svg image:

#note-0 {
    outline: 6px solid white;
}

Možná drop-shadow přes filtry:
https://stackoverflow.com/questions/6088409/svg-drop-shadow-using-css3


------------------------------------------------------------------------------

Code counter extension:
https://marketplace.visualstudio.com/items?itemName=uctakeoff.vscode-counter

------------------------------------------------------------------------------

TODO: V title baru nefunguje "text-overflow: ellipsis;"
- tohle zatím odložím.
    Titlebar se roztahuje podle velikosti textu, takže ellipsis tam není
  potřeba, ale časem to určitě potřeba bude.

------------------------------------------------------------------------------

Socket class hierarchy
------------------------

TODO: Vymyslet, kam dát metody na zpracování packetů.


------------------------------------------------------------------------------

Zákaz spouštění package skriptů v npm:
---------------------------------------

npm config set ignore-scripts true


